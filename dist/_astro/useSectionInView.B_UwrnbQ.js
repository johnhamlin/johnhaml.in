import{r as f}from"./index.D3AB4DJv.js";import{c as O,a as P}from"./active-section.l8uny1YW.js";var E=new Map,l=new WeakMap,m=0,V=void 0;function x(e){return e?(l.has(e)||(m+=1,l.set(e,m.toString())),l.get(e)):"0"}function T(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?x(e.root):e[t]}`).toString()}function z(e){const t=T(e);let n=E.get(t);if(!n){const u=new Map;let c;const i=new IntersectionObserver(s=>{s.forEach(r=>{var o;const w=r.isIntersecting&&c.some(a=>r.intersectionRatio>=a);e.trackVisibility&&typeof r.isVisible>"u"&&(r.isVisible=w),(o=u.get(r.target))==null||o.forEach(a=>{a(w,r)})})},e);c=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:i,elements:u},E.set(t,n)}return n}function B(e,t,n={},u=V){if(typeof window.IntersectionObserver>"u"&&u!==void 0){const o=e.getBoundingClientRect();return t(u,{isIntersecting:u,target:e,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:o,intersectionRect:o,rootBounds:o}),()=>{}}const{id:c,observer:i,elements:s}=z(n),r=s.get(e)||[];return s.has(e)||s.set(e,r),r.push(t),i.observe(e),function(){r.splice(r.indexOf(t),1),r.length===0&&(s.delete(e),i.unobserve(e)),s.size===0&&(i.disconnect(),E.delete(c))}}function L({threshold:e,delay:t,trackVisibility:n,rootMargin:u,root:c,triggerOnce:i,skip:s,initialInView:r,fallbackInView:o,onChange:w}={}){var a;const[g,A]=f.useState(null),b=f.useRef(w),[h,M]=f.useState({inView:!!r,entry:void 0});b.current=w,f.useEffect(()=>{if(s||!g)return;let v;return v=B(g,(I,S)=>{M({inView:I,entry:S}),b.current&&b.current(I,S),S.isIntersecting&&i&&v&&(v(),v=void 0)},{root:c,rootMargin:u,threshold:e,trackVisibility:n,delay:t},o),()=>{v&&v()}},[Array.isArray(e)?e.toString():e,g,c,u,i,s,n,o,t]);const R=(a=h.entry)==null?void 0:a.target,p=f.useRef(void 0);!g&&R&&!i&&!s&&p.current!==R&&(p.current=R,M({inView:!!r,entry:void 0}));const d=[A,h.inView,h.entry];return d.ref=d[0],d.inView=d[1],d.entry=d[2],d}function _(){return typeof window>"u"?!1:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function y(){return typeof window>"u"?!0:window.innerHeight>window.innerWidth}function W(e,t=.75){const[n]=f.useState(()=>_()),[u,c]=f.useState(()=>y());f.useEffect(()=>{const o=()=>{c(y())};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]);let i=t;n&&(i=u?Math.min(t,.2):Math.min(t,.3));const{ref:s,inView:r}=L({threshold:i});return f.useEffect(()=>{r&&Date.now()-O()>1e3&&P(e)},[r,e]),{ref:s,inView:r}}export{W as u};
